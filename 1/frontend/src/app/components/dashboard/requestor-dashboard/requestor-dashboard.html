<div class="requestor-dashboard">
  <h2>My Document Requests</h2>

  <button
    *ngIf="!showRequestForm"
    (click)="showRequestForm = true"
    class="btn-primary"
  >
    + New Request
  </button>

  <div *ngIf="showRequestForm" class="request-form">
    <h3>Create New Document Request</h3>
    <div class="form-group">
      <label>Document Type:</label>
      <input
        type="text"
        [(ngModel)]="documentType"
        placeholder="e.g., Clearance, Certificate, etc."
        class="form-control"
      />
    </div>
    <div class="form-actions">
      <button
        (click)="submitRequest()"
        [disabled]="loading"
        class="btn-primary"
      >
        {{ loading ? 'Submitting...' : 'Submit Request' }}
      </button>
      <button (click)="showRequestForm = false" class="btn-secondary">
        Cancel
      </button>
    </div>
  </div>

  <div *ngIf="error" class="error-message">{{ error }}</div>

  <div *ngIf="loading && !documentRequests.length" class="loading">
    Loading...
  </div>

  <div *ngIf="!loading && documentRequests.length === 0" class="empty-state">
    <p>No document requests yet. Create your first request!</p>
  </div>

  <div *ngIf="documentRequests.length > 0" class="requests-list">
    <div *ngFor="let request of documentRequests" class="request-card">
      <div class="request-header">
        <h3>{{ request.document_type }}</h3>
        <span
          [class]="'status-badge ' + getStatusClass(request.document_status)"
        >
          {{ request.document_status }}
        </span>
      </div>
      <div class="request-details">
        <p>
          <strong>Requested:</strong> {{ request.created_at | date:'short' }}
        </p>
        <p *ngIf="request.document_status !== 'pending'">
          <strong>Updated:</strong> {{ request.updated_at | date:'short' }}
        </p>
      </div>

      <div *ngIf="request.staff_message" class="staff-message">
        <strong>Staff Message:</strong> {{ request.staff_message }}
      </div>
    </div>
  </div>
</div>

<style>
  .requestor-dashboard {
    max-width: 800px;
    margin: 0 auto;
  }

  .requestor-dashboard h2 {
    color: #333;
    margin-bottom: 1.5rem;
  }

  .btn-primary {
    background: #007bff;
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 4px;
    cursor: pointer;
    margin-bottom: 1.5rem;
  }

  .btn-primary:hover:not(:disabled) {
    background: #0056b3;
  }

  .btn-primary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .btn-secondary {
    background: #6c757d;
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 4px;
    cursor: pointer;
    margin-left: 0.5rem;
  }

  .request-form {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    margin-bottom: 2rem;
  }

  .form-group {
    margin-bottom: 1rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: #333;
    font-weight: 500;
  }

  .form-control {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 1rem;
  }

  .form-actions {
    display: flex;
    gap: 0.5rem;
  }

  .error-message {
    background: #f8d7da;
    color: #721c24;
    padding: 1rem;
    border-radius: 4px;
    margin-bottom: 1rem;
  }

  .requests-list {
    display: grid;
    gap: 1rem;
  }

  .request-card {
    background: white;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .request-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  .request-header h3 {
    margin: 0;
    color: #333;
  }

  .status-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.875rem;
    font-weight: 500;
    text-transform: capitalize;
  }

  .status-pending {
    background: #fff3cd;
    color: #856404;
  }

  .status-approved {
    background: #d4edda;
    color: #155724;
  }

  .status-rejected {
    background: #f8d7da;
    color: #721c24;
  }

  .request-details {
    color: #666;
    font-size: 0.9rem;
  }

  .empty-state {
    text-align: center;
    padding: 3rem;
    color: #666;
  }

  .loading {
    text-align: center;
    padding: 2rem;
    color: #666;
  }

  .staff-message {
    margin-top: 1rem;
    padding: 0.75rem;
    background: #f8f9fa;
    border-left: 3px solid #007bff;
    border-radius: 4px;
    color: #495057;
  }

  .staff-message strong {
    color: #333;
  }
</style>
